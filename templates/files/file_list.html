{% extends 'base.html' %}

{% load static %}

  {% block title%}TCRC|Messages{% endblock title%}

{% block content %}
<br>
<section class="contact-us" id="contact">
    <div class="container">
      <div class="row">
        <div class="col-lg-12 align-self-center">
            <!--List html sets starts here  -->
            <form action="{% url 'file_list' %}" method="GET">
              <input style="border-radius: 10px;" type="text" 
                placeholder="Search by title or year or description" 
                name="q" value="{{ request.GET.q }}"
              >
              <button style="border-radius: 10px;">Search</button>
            </form>
            <div class="table-responsive">
              <table class="table" style="color: white;">
                  <thead>
                    <tr>
                      <th scope="col">#</th>
                      <th scope="col">Message</th>
                      <th scope="col">Date</th>
                      <th scope="col">Description</th>
                    </tr>
                  </thead>
                  <tbody>
                  {% for file in files %}
                    <tr>
                      <th>{{ forloop.counter }}</th>
                      <td>
                        {{ file }} <br>
                        <audio controls>
                          <source src="{{ file.file.url }}" type="audio/mp3">
                        </audio> &nbsp;&nbsp;&nbsp;&nbsp;
                        {% widthratio file.file.size 1040000 1  %} MB
                        <!-- <a href="{% url 'file_list' %}" download="{{ file.file }}">
                          <i class="fa-solid fa-download fa-2x"></i>
                        </a> -->
                      </td>
                      <td>{{ file.file_date|date:"Y, F" }}</td>
                      <td>{{ file.description }}</td>
                    </tr>
                  {% endfor %}
                  </tbody>
              </table>
            </div>
            <p style="color: white; text-align: center;">
              <i>...Use the search box to get messages from previous years...</i>
            </p>
            <!-- List html sets ends here -->
        </div>
      </div>
    </div>
    {% include 'base_files/footer.html' %}
  </section>

{% endblock content %}